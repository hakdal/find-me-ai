{"dependencies":[{"name":"./NitroModules","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":46,"index":61}}],"key":"IVfjau5UcgSn94aH5XtFOt6t9SU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getHybridObjectConstructor = getHybridObjectConstructor;\n  var _NitroModules = require(_dependencyMap[0], \"./NitroModules\");\n  const cache = new Map();\n\n  /**\n   * Get a constructor function for the given `HybridObject` {@linkcode T}.\n   * @param name The name of the `HybridObject` under which it was registered at.\n   * @returns A constructor that creates instances of {@linkcode T}\n   * @example\n   * ```ts\n   * export const HybridImage = getHybridObjectConstructor<Image>('Image')\n   *\n   * const image1 = new HybridImage()\n   * const image2 = new HybridImage()\n   * image1 instanceof HybridImage // --> true\n   * ```\n   */\n  function getHybridObjectConstructor(name) {\n    // Cache functions for performance.\n    if (cache.has(name)) {\n      return cache.get(name);\n    }\n\n    // A function that creates the HybridObject.\n    // This can be called with `new`, and internally sets the prototype.\n    const constructorFunc = function () {\n      const instance = _NitroModules.NitroModules.createHybridObject(name);\n      const prototype = Object.getPrototypeOf(instance);\n      if (constructorFunc.prototype !== prototype) {\n        constructorFunc.prototype = prototype;\n        constructorFunc.prototypeInitialized = true;\n      }\n      return instance;\n    };\n\n    // Configure lazy prototype. If `instanceof` is called before a `T`\n    // has been created, we just lazy-create a new `T` instance to set the proto.\n    constructorFunc.prototypeInitialized = false;\n    Object.defineProperty(constructorFunc, Symbol.hasInstance, {\n      value: instance => {\n        if (!constructorFunc.prototypeInitialized) {\n          // User didn't call `new T()` yet, so we don't\n          // know the prototype yet. Just create one temp object to find\n          // out the prototype.\n          const tempInstance = _NitroModules.NitroModules.createHybridObject(name);\n          constructorFunc.prototype = Object.getPrototypeOf(tempInstance);\n          constructorFunc.prototypeInitialized = true;\n        }\n        // Loop through the prototype chain of the value\n        // we're testing for to see if it is a direct instance\n        // of `T`, or a derivative of it.\n        let proto = Object.getPrototypeOf(instance);\n        while (proto != null) {\n          if (proto === constructorFunc.prototype) {\n            return true;\n          }\n          proto = Object.getPrototypeOf(proto);\n        }\n        // No prototype overlap.\n        return false;\n      }\n    });\n    cache.set(name, constructorFunc);\n    return constructorFunc;\n  }\n});","lineCount":72,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"getHybridObjectConstructor"],[7,36,19,0],[7,39,19,0,"getHybridObjectConstructor"],[7,65,19,0],[8,2,3,0],[8,6,3,0,"_NitroModules"],[8,19,3,0],[8,22,3,0,"require"],[8,29,3,0],[8,30,3,0,"_dependencyMap"],[8,44,3,0],[9,2,4,0],[9,8,4,6,"cache"],[9,13,4,11],[9,16,4,14],[9,20,4,18,"Map"],[9,23,4,21],[9,24,4,22],[9,25,4,23],[11,2,6,0],[12,0,7,0],[13,0,8,0],[14,0,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,0,17,0],[23,0,18,0],[24,2,19,7],[24,11,19,16,"getHybridObjectConstructor"],[24,37,19,42,"getHybridObjectConstructor"],[24,38,19,43,"name"],[24,42,19,47],[24,44,19,49],[25,4,20,2],[26,4,21,2],[26,8,21,6,"cache"],[26,13,21,11],[26,14,21,12,"has"],[26,17,21,15],[26,18,21,16,"name"],[26,22,21,20],[26,23,21,21],[26,25,21,23],[27,6,22,4],[27,13,22,11,"cache"],[27,18,22,16],[27,19,22,17,"get"],[27,22,22,20],[27,23,22,21,"name"],[27,27,22,25],[27,28,22,26],[28,4,23,2],[30,4,25,2],[31,4,26,2],[32,4,27,2],[32,10,27,8,"constructorFunc"],[32,25,27,23],[32,28,27,26],[32,37,27,26,"constructorFunc"],[32,38,27,26],[32,40,27,38],[33,6,28,4],[33,12,28,10,"instance"],[33,20,28,18],[33,23,28,21,"NitroModules"],[33,36,28,33],[33,37,28,33,"NitroModules"],[33,49,28,33],[33,50,28,34,"createHybridObject"],[33,68,28,52],[33,69,28,53,"name"],[33,73,28,57],[33,74,28,58],[34,6,29,4],[34,12,29,10,"prototype"],[34,21,29,19],[34,24,29,22,"Object"],[34,30,29,28],[34,31,29,29,"getPrototypeOf"],[34,45,29,43],[34,46,29,44,"instance"],[34,54,29,52],[34,55,29,53],[35,6,30,4],[35,10,30,8,"constructorFunc"],[35,25,30,23],[35,26,30,24,"prototype"],[35,35,30,33],[35,40,30,38,"prototype"],[35,49,30,47],[35,51,30,49],[36,8,31,6,"constructorFunc"],[36,23,31,21],[36,24,31,22,"prototype"],[36,33,31,31],[36,36,31,34,"prototype"],[36,45,31,43],[37,8,32,6,"constructorFunc"],[37,23,32,21],[37,24,32,22,"prototypeInitialized"],[37,44,32,42],[37,47,32,45],[37,51,32,49],[38,6,33,4],[39,6,34,4],[39,13,34,11,"instance"],[39,21,34,19],[40,4,35,2],[40,5,35,3],[42,4,37,2],[43,4,38,2],[44,4,39,2,"constructorFunc"],[44,19,39,17],[44,20,39,18,"prototypeInitialized"],[44,40,39,38],[44,43,39,41],[44,48,39,46],[45,4,40,2,"Object"],[45,10,40,8],[45,11,40,9,"defineProperty"],[45,25,40,23],[45,26,40,24,"constructorFunc"],[45,41,40,39],[45,43,40,41,"Symbol"],[45,49,40,47],[45,50,40,48,"hasInstance"],[45,61,40,59],[45,63,40,61],[46,6,41,4,"value"],[46,11,41,9],[46,13,41,11,"instance"],[46,21,41,19],[46,25,41,23],[47,8,42,6],[47,12,42,10],[47,13,42,11,"constructorFunc"],[47,28,42,26],[47,29,42,27,"prototypeInitialized"],[47,49,42,47],[47,51,42,49],[48,10,43,8],[49,10,44,8],[50,10,45,8],[51,10,46,8],[51,16,46,14,"tempInstance"],[51,28,46,26],[51,31,46,29,"NitroModules"],[51,44,46,41],[51,45,46,41,"NitroModules"],[51,57,46,41],[51,58,46,42,"createHybridObject"],[51,76,46,60],[51,77,46,61,"name"],[51,81,46,65],[51,82,46,66],[52,10,47,8,"constructorFunc"],[52,25,47,23],[52,26,47,24,"prototype"],[52,35,47,33],[52,38,47,36,"Object"],[52,44,47,42],[52,45,47,43,"getPrototypeOf"],[52,59,47,57],[52,60,47,58,"tempInstance"],[52,72,47,70],[52,73,47,71],[53,10,48,8,"constructorFunc"],[53,25,48,23],[53,26,48,24,"prototypeInitialized"],[53,46,48,44],[53,49,48,47],[53,53,48,51],[54,8,49,6],[55,8,50,6],[56,8,51,6],[57,8,52,6],[58,8,53,6],[58,12,53,10,"proto"],[58,17,53,15],[58,20,53,18,"Object"],[58,26,53,24],[58,27,53,25,"getPrototypeOf"],[58,41,53,39],[58,42,53,40,"instance"],[58,50,53,48],[58,51,53,49],[59,8,54,6],[59,15,54,13,"proto"],[59,20,54,18],[59,24,54,22],[59,28,54,26],[59,30,54,28],[60,10,55,8],[60,14,55,12,"proto"],[60,19,55,17],[60,24,55,22,"constructorFunc"],[60,39,55,37],[60,40,55,38,"prototype"],[60,49,55,47],[60,51,55,49],[61,12,56,10],[61,19,56,17],[61,23,56,21],[62,10,57,8],[63,10,58,8,"proto"],[63,15,58,13],[63,18,58,16,"Object"],[63,24,58,22],[63,25,58,23,"getPrototypeOf"],[63,39,58,37],[63,40,58,38,"proto"],[63,45,58,43],[63,46,58,44],[64,8,59,6],[65,8,60,6],[66,8,61,6],[66,15,61,13],[66,20,61,18],[67,6,62,4],[68,4,63,2],[68,5,63,3],[68,6,63,4],[69,4,64,2,"cache"],[69,9,64,7],[69,10,64,8,"set"],[69,13,64,11],[69,14,64,12,"name"],[69,18,64,16],[69,20,64,18,"constructorFunc"],[69,35,64,33],[69,36,64,34],[70,4,65,2],[70,11,65,9,"constructorFunc"],[70,26,65,24],[71,2,66,0],[72,0,66,1],[72,3]],"functionMap":{"names":["<global>","getHybridObjectConstructor","constructorFunc","Object.defineProperty$argument_2.value"],"mappings":"AAA;OCkB;0BCQ;GDQ;WEM;KFqB;CDI"},"hasCjsExports":false},"type":"js/module"}]}