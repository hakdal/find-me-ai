{"dependencies":[{"name":"./cmp.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":27,"index":27}}],"key":"8pN0q1sQzAViGNLJwRFPVu0CDnI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getIndexByKey = getIndexByKey;\n  exports.getByKey = getByKey;\n  exports.getIndexByKeyRange = getIndexByKeyRange;\n  exports.getByKeyRange = getByKeyRange;\n  exports.getIndexByKeyGTE = getIndexByKeyGTE;\n  var _cmpJs = require(_dependencyMap[0], \"./cmp.js\");\n  var cmp = _interopDefault(_cmpJs);\n  /**\n   * Classic binary search implementation. Returns the index where the key\n   * should be inserted, assuming the records list is ordered.\n   */\n  function binarySearch(records, key) {\n    let low = 0;\n    let high = records.length;\n    let mid;\n    while (low < high) {\n      mid = low + high >>> 1; // like Math.floor((low + high) / 2) but fast\n      if ((0, cmp.default)(records[mid].key, key) < 0) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return low;\n  }\n\n  /**\n   * Equivalent to `records.findIndex(record => cmp(record.key, key) === 0)`\n   */\n  function getIndexByKey(records, key) {\n    const idx = binarySearch(records, key);\n    const record = records[idx];\n    if (record && (0, cmp.default)(record.key, key) === 0) {\n      return idx;\n    }\n    return -1;\n  }\n\n  /**\n   * Equivalent to `records.find(record => cmp(record.key, key) === 0)`\n   */\n  function getByKey(records, key) {\n    const idx = getIndexByKey(records, key);\n    return records[idx];\n  }\n\n  /**\n   * Equivalent to `records.findIndex(record => key.includes(record.key))`\n   */\n  function getIndexByKeyRange(records, keyRange) {\n    const lowerIdx = typeof keyRange.lower === 'undefined' ? 0 : binarySearch(records, keyRange.lower);\n    const upperIdx = typeof keyRange.upper === 'undefined' ? records.length - 1 : binarySearch(records, keyRange.upper);\n    for (let i = lowerIdx; i <= upperIdx; i++) {\n      const record = records[i];\n      if (record && keyRange.includes(record.key)) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Equivalent to `records.find(record => key.includes(record.key))`\n   */\n  function getByKeyRange(records, keyRange) {\n    const idx = getIndexByKeyRange(records, keyRange);\n    return records[idx];\n  }\n\n  /**\n   * Equivalent to `records.findIndex(record => cmp(record.key, key) >= 0)`\n   */\n  function getIndexByKeyGTE(records, key) {\n    const idx = binarySearch(records, key);\n    const record = records[idx];\n    if (record && (0, cmp.default)(record.key, key) >= 0) {\n      return idx;\n    }\n    return -1;\n  }\n});","lineCount":92,"map":[[12,2,24,0,"exports"],[12,9,24,0],[12,10,24,0,"getIndexByKey"],[12,23,24,0],[12,26,24,0,"getIndexByKey"],[12,39,24,0],[13,2,36,0,"exports"],[13,9,36,0],[13,10,36,0,"getByKey"],[13,18,36,0],[13,21,36,0,"getByKey"],[13,29,36,0],[14,2,44,0,"exports"],[14,9,44,0],[14,10,44,0,"getIndexByKeyRange"],[14,28,44,0],[14,31,44,0,"getIndexByKeyRange"],[14,49,44,0],[15,2,63,0,"exports"],[15,9,63,0],[15,10,63,0,"getByKeyRange"],[15,23,63,0],[15,26,63,0,"getByKeyRange"],[15,39,63,0],[16,2,71,0,"exports"],[16,9,71,0],[16,10,71,0,"getIndexByKeyGTE"],[16,26,71,0],[16,29,71,0,"getIndexByKeyGTE"],[16,45,71,0],[17,2,1,0],[17,6,1,0,"_cmpJs"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,1,0],[18,6,1,0,"cmp"],[18,9,1,0],[18,12,1,0,"_interopDefault"],[18,27,1,0],[18,28,1,0,"_cmpJs"],[18,34,1,0],[19,2,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,2,6,0],[23,11,6,9,"binarySearch"],[23,23,6,21,"binarySearch"],[23,24,6,22,"records"],[23,31,6,29],[23,33,6,31,"key"],[23,36,6,34],[23,38,6,36],[24,4,7,2],[24,8,7,6,"low"],[24,11,7,9],[24,14,7,12],[24,15,7,13],[25,4,8,2],[25,8,8,6,"high"],[25,12,8,10],[25,15,8,13,"records"],[25,22,8,20],[25,23,8,21,"length"],[25,29,8,27],[26,4,9,2],[26,8,9,6,"mid"],[26,11,9,9],[27,4,10,2],[27,11,10,9,"low"],[27,14,10,12],[27,17,10,15,"high"],[27,21,10,19],[27,23,10,21],[28,6,11,4,"mid"],[28,9,11,7],[28,12,11,11,"low"],[28,15,11,14],[28,18,11,17,"high"],[28,22,11,21],[28,27,11,27],[28,28,11,28],[28,29,11,29],[28,30,11,30],[29,6,12,4],[29,10,12,8],[29,14,12,8,"cmp"],[29,17,12,11],[29,18,12,11,"default"],[29,25,12,11],[29,27,12,12,"records"],[29,34,12,19],[29,35,12,20,"mid"],[29,38,12,23],[29,39,12,24],[29,40,12,25,"key"],[29,43,12,28],[29,45,12,30,"key"],[29,48,12,33],[29,49,12,34],[29,52,12,37],[29,53,12,38],[29,55,12,40],[30,8,13,6,"low"],[30,11,13,9],[30,14,13,12,"mid"],[30,17,13,15],[30,20,13,18],[30,21,13,19],[31,6,14,4],[31,7,14,5],[31,13,14,11],[32,8,15,6,"high"],[32,12,15,10],[32,15,15,13,"mid"],[32,18,15,16],[33,6,16,4],[34,4,17,2],[35,4,18,2],[35,11,18,9,"low"],[35,14,18,12],[36,2,19,0],[38,2,21,0],[39,0,22,0],[40,0,23,0],[41,2,24,7],[41,11,24,16,"getIndexByKey"],[41,24,24,29,"getIndexByKey"],[41,25,24,30,"records"],[41,32,24,37],[41,34,24,39,"key"],[41,37,24,42],[41,39,24,44],[42,4,25,2],[42,10,25,8,"idx"],[42,13,25,11],[42,16,25,14,"binarySearch"],[42,28,25,26],[42,29,25,27,"records"],[42,36,25,34],[42,38,25,36,"key"],[42,41,25,39],[42,42,25,40],[43,4,26,2],[43,10,26,8,"record"],[43,16,26,14],[43,19,26,17,"records"],[43,26,26,24],[43,27,26,25,"idx"],[43,30,26,28],[43,31,26,29],[44,4,27,2],[44,8,27,6,"record"],[44,14,27,12],[44,18,27,16],[44,22,27,16,"cmp"],[44,25,27,19],[44,26,27,19,"default"],[44,33,27,19],[44,35,27,20,"record"],[44,41,27,26],[44,42,27,27,"key"],[44,45,27,30],[44,47,27,32,"key"],[44,50,27,35],[44,51,27,36],[44,56,27,41],[44,57,27,42],[44,59,27,44],[45,6,28,4],[45,13,28,11,"idx"],[45,16,28,14],[46,4,29,2],[47,4,30,2],[47,11,30,9],[47,12,30,10],[47,13,30,11],[48,2,31,0],[50,2,33,0],[51,0,34,0],[52,0,35,0],[53,2,36,7],[53,11,36,16,"getByKey"],[53,19,36,24,"getByKey"],[53,20,36,25,"records"],[53,27,36,32],[53,29,36,34,"key"],[53,32,36,37],[53,34,36,39],[54,4,37,2],[54,10,37,8,"idx"],[54,13,37,11],[54,16,37,14,"getIndexByKey"],[54,29,37,27],[54,30,37,28,"records"],[54,37,37,35],[54,39,37,37,"key"],[54,42,37,40],[54,43,37,41],[55,4,38,2],[55,11,38,9,"records"],[55,18,38,16],[55,19,38,17,"idx"],[55,22,38,20],[55,23,38,21],[56,2,39,0],[58,2,41,0],[59,0,42,0],[60,0,43,0],[61,2,44,7],[61,11,44,16,"getIndexByKeyRange"],[61,29,44,34,"getIndexByKeyRange"],[61,30,44,35,"records"],[61,37,44,42],[61,39,44,44,"keyRange"],[61,47,44,52],[61,49,44,54],[62,4,45,2],[62,10,45,8,"lowerIdx"],[62,18,45,16],[62,21,46,4],[62,28,46,11,"keyRange"],[62,36,46,19],[62,37,46,20,"lower"],[62,42,46,25],[62,47,46,30],[62,58,46,41],[62,61,46,44],[62,62,46,45],[62,65,46,48,"binarySearch"],[62,77,46,60],[62,78,46,61,"records"],[62,85,46,68],[62,87,46,70,"keyRange"],[62,95,46,78],[62,96,46,79,"lower"],[62,101,46,84],[62,102,46,85],[63,4,47,2],[63,10,47,8,"upperIdx"],[63,18,47,16],[63,21,48,4],[63,28,48,11,"keyRange"],[63,36,48,19],[63,37,48,20,"upper"],[63,42,48,25],[63,47,48,30],[63,58,48,41],[63,61,49,8,"records"],[63,68,49,15],[63,69,49,16,"length"],[63,75,49,22],[63,78,49,25],[63,79,49,26],[63,82,50,8,"binarySearch"],[63,94,50,20],[63,95,50,21,"records"],[63,102,50,28],[63,104,50,30,"keyRange"],[63,112,50,38],[63,113,50,39,"upper"],[63,118,50,44],[63,119,50,45],[64,4,51,2],[64,9,51,7],[64,13,51,11,"i"],[64,14,51,12],[64,17,51,15,"lowerIdx"],[64,25,51,23],[64,27,51,25,"i"],[64,28,51,26],[64,32,51,30,"upperIdx"],[64,40,51,38],[64,42,51,40,"i"],[64,43,51,41],[64,45,51,43],[64,47,51,45],[65,6,52,4],[65,12,52,10,"record"],[65,18,52,16],[65,21,52,19,"records"],[65,28,52,26],[65,29,52,27,"i"],[65,30,52,28],[65,31,52,29],[66,6,53,4],[66,10,53,8,"record"],[66,16,53,14],[66,20,53,18,"keyRange"],[66,28,53,26],[66,29,53,27,"includes"],[66,37,53,35],[66,38,53,36,"record"],[66,44,53,42],[66,45,53,43,"key"],[66,48,53,46],[66,49,53,47],[66,51,53,49],[67,8,54,6],[67,15,54,13,"i"],[67,16,54,14],[68,6,55,4],[69,4,56,2],[70,4,57,2],[70,11,57,9],[70,12,57,10],[70,13,57,11],[71,2,58,0],[73,2,60,0],[74,0,61,0],[75,0,62,0],[76,2,63,7],[76,11,63,16,"getByKeyRange"],[76,24,63,29,"getByKeyRange"],[76,25,63,30,"records"],[76,32,63,37],[76,34,63,39,"keyRange"],[76,42,63,47],[76,44,63,49],[77,4,64,2],[77,10,64,8,"idx"],[77,13,64,11],[77,16,64,14,"getIndexByKeyRange"],[77,34,64,32],[77,35,64,33,"records"],[77,42,64,40],[77,44,64,42,"keyRange"],[77,52,64,50],[77,53,64,51],[78,4,65,2],[78,11,65,9,"records"],[78,18,65,16],[78,19,65,17,"idx"],[78,22,65,20],[78,23,65,21],[79,2,66,0],[81,2,68,0],[82,0,69,0],[83,0,70,0],[84,2,71,7],[84,11,71,16,"getIndexByKeyGTE"],[84,27,71,32,"getIndexByKeyGTE"],[84,28,71,33,"records"],[84,35,71,40],[84,37,71,42,"key"],[84,40,71,45],[84,42,71,47],[85,4,72,2],[85,10,72,8,"idx"],[85,13,72,11],[85,16,72,14,"binarySearch"],[85,28,72,26],[85,29,72,27,"records"],[85,36,72,34],[85,38,72,36,"key"],[85,41,72,39],[85,42,72,40],[86,4,73,2],[86,10,73,8,"record"],[86,16,73,14],[86,19,73,17,"records"],[86,26,73,24],[86,27,73,25,"idx"],[86,30,73,28],[86,31,73,29],[87,4,74,2],[87,8,74,6,"record"],[87,14,74,12],[87,18,74,16],[87,22,74,16,"cmp"],[87,25,74,19],[87,26,74,19,"default"],[87,33,74,19],[87,35,74,20,"record"],[87,41,74,26],[87,42,74,27,"key"],[87,45,74,30],[87,47,74,32,"key"],[87,50,74,35],[87,51,74,36],[87,55,74,40],[87,56,74,41],[87,58,74,43],[88,6,75,4],[88,13,75,11,"idx"],[88,16,75,14],[89,4,76,2],[90,4,77,2],[90,11,77,9],[90,12,77,10],[90,13,77,11],[91,2,78,0],[92,0,78,1],[92,3]],"functionMap":{"names":["<global>","binarySearch","getIndexByKey","getByKey","getIndexByKeyRange","getByKeyRange","getIndexByKeyGTE"],"mappings":"AAA;ACK;CDa;OEK;CFO;OGK;CHG;OIK;CJc;OKK;CLG;OMK;CNO"},"hasCjsExports":false},"type":"js/module"}]}