{"dependencies":[{"name":"./errors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"sBFAilsnlkNTfGhyvhhjLjsyBXM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _errorsJs = require(_dependencyMap[0], \"./errors.js\");\n  const MAX_KEY = 9007199254740992;\n  class KeyGenerator {\n    // This is kind of wrong. Should start at 1 and increment only after record is saved\n    num = 0;\n    next() {\n      if (this.num >= MAX_KEY) {\n        throw new _errorsJs.ConstraintError();\n      }\n      this.num += 1;\n      return this.num;\n    }\n\n    // https://w3c.github.io/IndexedDB/#possibly-update-the-key-generator\n    setIfLarger(num) {\n      const value = Math.floor(Math.min(num, MAX_KEY)) - 1;\n      if (value >= this.num) {\n        this.num = value + 1;\n      }\n    }\n  }\n  var _default = KeyGenerator;\n});","lineCount":35,"map":[[7,2,22,0,"Object"],[7,8,22,0],[7,9,22,0,"defineProperty"],[7,23,22,0],[7,24,22,0,"exports"],[7,31,22,0],[8,4,22,0,"enumerable"],[8,14,22,0],[9,4,22,0,"get"],[9,7,22,0],[9,18,22,0,"get"],[9,19,22,0],[10,6,22,0],[10,13,22,0,"_default"],[10,21,22,0],[11,4,22,0],[12,2,22,0],[13,2,1,0],[13,6,1,0,"_errorsJs"],[13,15,1,0],[13,18,1,0,"require"],[13,25,1,0],[13,26,1,0,"_dependencyMap"],[13,40,1,0],[14,2,2,0],[14,8,2,6,"MAX_KEY"],[14,15,2,13],[14,18,2,16],[14,34,2,32],[15,2,3,0],[15,8,3,6,"KeyGenerator"],[15,20,3,18],[15,21,3,19],[16,4,4,2],[17,4,5,2,"num"],[17,7,5,5],[17,10,5,8],[17,11,5,9],[18,4,6,2,"next"],[18,8,6,6,"next"],[18,9,6,6],[18,11,6,9],[19,6,7,4],[19,10,7,8],[19,14,7,12],[19,15,7,13,"num"],[19,18,7,16],[19,22,7,20,"MAX_KEY"],[19,29,7,27],[19,31,7,29],[20,8,8,6],[20,14,8,12],[20,18,8,16,"ConstraintError"],[20,27,8,31],[20,28,8,31,"ConstraintError"],[20,43,8,31],[20,44,8,32],[20,45,8,33],[21,6,9,4],[22,6,10,4],[22,10,10,8],[22,11,10,9,"num"],[22,14,10,12],[22,18,10,16],[22,19,10,17],[23,6,11,4],[23,13,11,11],[23,17,11,15],[23,18,11,16,"num"],[23,21,11,19],[24,4,12,2],[26,4,14,2],[27,4,15,2,"setIfLarger"],[27,15,15,13,"setIfLarger"],[27,16,15,14,"num"],[27,19,15,17],[27,21,15,19],[28,6,16,4],[28,12,16,10,"value"],[28,17,16,15],[28,20,16,18,"Math"],[28,24,16,22],[28,25,16,23,"floor"],[28,30,16,28],[28,31,16,29,"Math"],[28,35,16,33],[28,36,16,34,"min"],[28,39,16,37],[28,40,16,38,"num"],[28,43,16,41],[28,45,16,43,"MAX_KEY"],[28,52,16,50],[28,53,16,51],[28,54,16,52],[28,57,16,55],[28,58,16,56],[29,6,17,4],[29,10,17,8,"value"],[29,15,17,13],[29,19,17,17],[29,23,17,21],[29,24,17,22,"num"],[29,27,17,25],[29,29,17,27],[30,8,18,6],[30,12,18,10],[30,13,18,11,"num"],[30,16,18,14],[30,19,18,17,"value"],[30,24,18,22],[30,27,18,25],[30,28,18,26],[31,6,19,4],[32,4,20,2],[33,2,21,0],[34,2,22,0],[34,6,22,0,"_default"],[34,14,22,0],[34,17,22,15,"KeyGenerator"],[34,29,22,27],[35,0,22,28],[35,3]],"functionMap":{"names":["<global>","KeyGenerator","next","setIfLarger"],"mappings":"AAA;ACE;ECG;GDM;EEG;GFK;CDC"},"hasCjsExports":false},"type":"js/module"}]}