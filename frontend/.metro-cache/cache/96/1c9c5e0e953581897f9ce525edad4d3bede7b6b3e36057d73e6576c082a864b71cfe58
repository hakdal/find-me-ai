{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.generateDatabaseId = generateDatabaseId;\n  exports.generateFirestoreId = generateFirestoreId;\n  const PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\n  const AUTO_ID_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  // timestamp of last push, used to prevent local collisions if you push twice in one ms.\n  let lastPushTime = 0;\n\n  // we generate 72-bits of randomness which get turned into 12 characters and appended to the\n  // timestamp to prevent collisions with other clients.  We store the last characters we\n  // generated because in the event of a collision, we'll use those same characters except\n  // \"incremented\" by one.\n  const lastRandChars = [];\n\n  /**\n   * Generate a firebase id - for use with ref().push(val, cb) - e.g. -KXMr7k2tXUFQqiaZRY4'\n   * @param serverTimeOffset - pass in server time offset from native side\n   * @returns {string}\n   */\n  function generateDatabaseId(serverTimeOffset = 0) {\n    const timeStampChars = new Array(8);\n    let now = new Date().getTime() + serverTimeOffset;\n    const duplicateTime = now === lastPushTime;\n    lastPushTime = now;\n    for (let i = 7; i >= 0; i -= 1) {\n      timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\n      now = Math.floor(now / 64);\n    }\n    if (now !== 0) {\n      throw new Error('We should have converted the entire timestamp.');\n    }\n    let id = timeStampChars.join('');\n    if (!duplicateTime) {\n      for (let i = 0; i < 12; i += 1) {\n        lastRandChars[i] = Math.floor(Math.random() * 64);\n      }\n    } else {\n      // if the timestamp hasn't changed since last push,\n      // use the same random number, but increment it by 1.\n      let i;\n      for (i = 11; i >= 0 && lastRandChars[i] === 63; i -= 1) {\n        lastRandChars[i] = 0;\n      }\n      lastRandChars[i] += 1;\n    }\n    for (let i = 0; i < 12; i++) {\n      id += PUSH_CHARS.charAt(lastRandChars[i]);\n    }\n    if (id.length !== 20) {\n      throw new Error('Length should be 20.');\n    }\n    return id;\n  }\n\n  /**\n   * Generate a firestore auto id for use with collection/document .add()\n   * @return {string}\n   */\n  function generateFirestoreId() {\n    let autoId = '';\n    for (let i = 0; i < 20; i++) {\n      autoId += AUTO_ID_CHARS.charAt(Math.floor(Math.random() * AUTO_ID_CHARS.length));\n    }\n    return autoId;\n  }\n});","lineCount":72,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"generateDatabaseId"],[7,28,19,0],[7,31,19,0,"generateDatabaseId"],[7,49,19,0],[8,2,67,0,"exports"],[8,9,67,0],[8,10,67,0,"generateFirestoreId"],[8,29,67,0],[8,32,67,0,"generateFirestoreId"],[8,51,67,0],[9,2,1,0],[9,8,1,6,"PUSH_CHARS"],[9,18,1,16],[9,21,1,19],[9,87,1,85],[10,2,3,0],[10,8,3,6,"AUTO_ID_CHARS"],[10,21,3,19],[10,24,3,22],[10,88,3,86],[12,2,5,0],[13,2,6,0],[13,6,6,4,"lastPushTime"],[13,18,6,16],[13,21,6,19],[13,22,6,20],[15,2,8,0],[16,2,9,0],[17,2,10,0],[18,2,11,0],[19,2,12,0],[19,8,12,6,"lastRandChars"],[19,21,12,19],[19,24,12,22],[19,26,12,24],[21,2,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,2,19,7],[26,11,19,16,"generateDatabaseId"],[26,29,19,34,"generateDatabaseId"],[26,30,19,35,"serverTimeOffset"],[26,46,19,51],[26,49,19,54],[26,50,19,55],[26,52,19,57],[27,4,20,2],[27,10,20,8,"timeStampChars"],[27,24,20,22],[27,27,20,25],[27,31,20,29,"Array"],[27,36,20,34],[27,37,20,35],[27,38,20,36],[27,39,20,37],[28,4,21,2],[28,8,21,6,"now"],[28,11,21,9],[28,14,21,12],[28,18,21,16,"Date"],[28,22,21,20],[28,23,21,21],[28,24,21,22],[28,25,21,23,"getTime"],[28,32,21,30],[28,33,21,31],[28,34,21,32],[28,37,21,35,"serverTimeOffset"],[28,53,21,51],[29,4,22,2],[29,10,22,8,"duplicateTime"],[29,23,22,21],[29,26,22,24,"now"],[29,29,22,27],[29,34,22,32,"lastPushTime"],[29,46,22,44],[30,4,24,2,"lastPushTime"],[30,16,24,14],[30,19,24,17,"now"],[30,22,24,20],[31,4,26,2],[31,9,26,7],[31,13,26,11,"i"],[31,14,26,12],[31,17,26,15],[31,18,26,16],[31,20,26,18,"i"],[31,21,26,19],[31,25,26,23],[31,26,26,24],[31,28,26,26,"i"],[31,29,26,27],[31,33,26,31],[31,34,26,32],[31,36,26,34],[32,6,27,4,"timeStampChars"],[32,20,27,18],[32,21,27,19,"i"],[32,22,27,20],[32,23,27,21],[32,26,27,24,"PUSH_CHARS"],[32,36,27,34],[32,37,27,35,"charAt"],[32,43,27,41],[32,44,27,42,"now"],[32,47,27,45],[32,50,27,48],[32,52,27,50],[32,53,27,51],[33,6,28,4,"now"],[33,9,28,7],[33,12,28,10,"Math"],[33,16,28,14],[33,17,28,15,"floor"],[33,22,28,20],[33,23,28,21,"now"],[33,26,28,24],[33,29,28,27],[33,31,28,29],[33,32,28,30],[34,4,29,2],[35,4,31,2],[35,8,31,6,"now"],[35,11,31,9],[35,16,31,14],[35,17,31,15],[35,19,31,17],[36,6,32,4],[36,12,32,10],[36,16,32,14,"Error"],[36,21,32,19],[36,22,32,20],[36,70,32,68],[36,71,32,69],[37,4,33,2],[38,4,35,2],[38,8,35,6,"id"],[38,10,35,8],[38,13,35,11,"timeStampChars"],[38,27,35,25],[38,28,35,26,"join"],[38,32,35,30],[38,33,35,31],[38,35,35,33],[38,36,35,34],[39,4,37,2],[39,8,37,6],[39,9,37,7,"duplicateTime"],[39,22,37,20],[39,24,37,22],[40,6,38,4],[40,11,38,9],[40,15,38,13,"i"],[40,16,38,14],[40,19,38,17],[40,20,38,18],[40,22,38,20,"i"],[40,23,38,21],[40,26,38,24],[40,28,38,26],[40,30,38,28,"i"],[40,31,38,29],[40,35,38,33],[40,36,38,34],[40,38,38,36],[41,8,39,6,"lastRandChars"],[41,21,39,19],[41,22,39,20,"i"],[41,23,39,21],[41,24,39,22],[41,27,39,25,"Math"],[41,31,39,29],[41,32,39,30,"floor"],[41,37,39,35],[41,38,39,36,"Math"],[41,42,39,40],[41,43,39,41,"random"],[41,49,39,47],[41,50,39,48],[41,51,39,49],[41,54,39,52],[41,56,39,54],[41,57,39,55],[42,6,40,4],[43,4,41,2],[43,5,41,3],[43,11,41,9],[44,6,42,4],[45,6,43,4],[46,6,44,4],[46,10,44,8,"i"],[46,11,44,9],[47,6,45,4],[47,11,45,9,"i"],[47,12,45,10],[47,15,45,13],[47,17,45,15],[47,19,45,17,"i"],[47,20,45,18],[47,24,45,22],[47,25,45,23],[47,29,45,27,"lastRandChars"],[47,42,45,40],[47,43,45,41,"i"],[47,44,45,42],[47,45,45,43],[47,50,45,48],[47,52,45,50],[47,54,45,52,"i"],[47,55,45,53],[47,59,45,57],[47,60,45,58],[47,62,45,60],[48,8,46,6,"lastRandChars"],[48,21,46,19],[48,22,46,20,"i"],[48,23,46,21],[48,24,46,22],[48,27,46,25],[48,28,46,26],[49,6,47,4],[50,6,49,4,"lastRandChars"],[50,19,49,17],[50,20,49,18,"i"],[50,21,49,19],[50,22,49,20],[50,26,49,24],[50,27,49,25],[51,4,50,2],[52,4,52,2],[52,9,52,7],[52,13,52,11,"i"],[52,14,52,12],[52,17,52,15],[52,18,52,16],[52,20,52,18,"i"],[52,21,52,19],[52,24,52,22],[52,26,52,24],[52,28,52,26,"i"],[52,29,52,27],[52,31,52,29],[52,33,52,31],[53,6,53,4,"id"],[53,8,53,6],[53,12,53,10,"PUSH_CHARS"],[53,22,53,20],[53,23,53,21,"charAt"],[53,29,53,27],[53,30,53,28,"lastRandChars"],[53,43,53,41],[53,44,53,42,"i"],[53,45,53,43],[53,46,53,44],[53,47,53,45],[54,4,54,2],[55,4,56,2],[55,8,56,6,"id"],[55,10,56,8],[55,11,56,9,"length"],[55,17,56,15],[55,22,56,20],[55,24,56,22],[55,26,56,24],[56,6,57,4],[56,12,57,10],[56,16,57,14,"Error"],[56,21,57,19],[56,22,57,20],[56,44,57,42],[56,45,57,43],[57,4,58,2],[58,4,60,2],[58,11,60,9,"id"],[58,13,60,11],[59,2,61,0],[61,2,63,0],[62,0,64,0],[63,0,65,0],[64,0,66,0],[65,2,67,7],[65,11,67,16,"generateFirestoreId"],[65,30,67,35,"generateFirestoreId"],[65,31,67,35],[65,33,67,38],[66,4,68,2],[66,8,68,6,"autoId"],[66,14,68,12],[66,17,68,15],[66,19,68,17],[67,4,70,2],[67,9,70,7],[67,13,70,11,"i"],[67,14,70,12],[67,17,70,15],[67,18,70,16],[67,20,70,18,"i"],[67,21,70,19],[67,24,70,22],[67,26,70,24],[67,28,70,26,"i"],[67,29,70,27],[67,31,70,29],[67,33,70,31],[68,6,71,4,"autoId"],[68,12,71,10],[68,16,71,14,"AUTO_ID_CHARS"],[68,29,71,27],[68,30,71,28,"charAt"],[68,36,71,34],[68,37,71,35,"Math"],[68,41,71,39],[68,42,71,40,"floor"],[68,47,71,45],[68,48,71,46,"Math"],[68,52,71,50],[68,53,71,51,"random"],[68,59,71,57],[68,60,71,58],[68,61,71,59],[68,64,71,62,"AUTO_ID_CHARS"],[68,77,71,75],[68,78,71,76,"length"],[68,84,71,82],[68,85,71,83],[68,86,71,84],[69,4,72,2],[70,4,73,2],[70,11,73,9,"autoId"],[70,17,73,15],[71,2,74,0],[72,0,74,1],[72,3]],"functionMap":{"names":["<global>","generateDatabaseId","generateFirestoreId"],"mappings":"AAA;OCkB;CD0C;OEM;CFO"},"hasCjsExports":false},"type":"js/module"}]}