{"dependencies":[{"name":"./validate","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":633},"end":{"line":18,"column":40,"index":673}}],"key":"RvgWEoyrrZ9BXE2g71cXOi+VBZc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.promiseDefer = promiseDefer;\n  exports.promiseWithOptionalCallback = promiseWithOptionalCallback;\n  var _validate = require(_dependencyMap[0], \"./validate\");\n  /*\n   * Copyright (c) 2016-present Invertase Limited & Contributors\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this library except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *   http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   */\n\n  /**\n   *\n   */\n  function promiseDefer() {\n    const deferred = {\n      resolve: null,\n      reject: null\n    };\n    deferred.promise = new Promise((resolve, reject) => {\n      deferred.resolve = resolve;\n      deferred.reject = reject;\n    });\n    return deferred;\n  }\n\n  /**\n   * @param promise\n   * @param callback\n   */\n  function promiseWithOptionalCallback(promise, callback) {\n    if (!(0, _validate.isFunction)(callback)) {\n      return promise;\n    }\n    return promise.then(result => {\n      if (callback && callback.length === 1) {\n        callback(null);\n      } else if (callback) {\n        callback(null, result);\n      }\n      return result;\n    }).catch(error => {\n      if (callback) {\n        callback(error);\n      }\n      return Promise.reject(error);\n    });\n  }\n});","lineCount":64,"map":[[7,2,23,0,"exports"],[7,9,23,0],[7,10,23,0,"promiseDefer"],[7,22,23,0],[7,25,23,0,"promiseDefer"],[7,37,23,0],[8,2,41,0,"exports"],[8,9,41,0],[8,10,41,0,"promiseWithOptionalCallback"],[8,37,41,0],[8,40,41,0,"promiseWithOptionalCallback"],[8,67,41,0],[9,2,18,0],[9,6,18,0,"_validate"],[9,15,18,0],[9,18,18,0,"require"],[9,25,18,0],[9,26,18,0,"_dependencyMap"],[9,40,18,0],[10,2,1,0],[11,0,2,0],[12,0,3,0],[13,0,4,0],[14,0,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[18,0,9,0],[19,0,10,0],[20,0,11,0],[21,0,12,0],[22,0,13,0],[23,0,14,0],[24,0,15,0],[25,0,16,0],[27,2,20,0],[28,0,21,0],[29,0,22,0],[30,2,23,7],[30,11,23,16,"promiseDefer"],[30,23,23,28,"promiseDefer"],[30,24,23,28],[30,26,23,31],[31,4,24,2],[31,10,24,8,"deferred"],[31,18,24,16],[31,21,24,19],[32,6,25,4,"resolve"],[32,13,25,11],[32,15,25,13],[32,19,25,17],[33,6,26,4,"reject"],[33,12,26,10],[33,14,26,12],[34,4,27,2],[34,5,27,3],[35,4,29,2,"deferred"],[35,12,29,10],[35,13,29,11,"promise"],[35,20,29,18],[35,23,29,21],[35,27,29,25,"Promise"],[35,34,29,32],[35,35,29,33],[35,36,29,34,"resolve"],[35,43,29,41],[35,45,29,43,"reject"],[35,51,29,49],[35,56,29,54],[36,6,30,4,"deferred"],[36,14,30,12],[36,15,30,13,"resolve"],[36,22,30,20],[36,25,30,23,"resolve"],[36,32,30,30],[37,6,31,4,"deferred"],[37,14,31,12],[37,15,31,13,"reject"],[37,21,31,19],[37,24,31,22,"reject"],[37,30,31,28],[38,4,32,2],[38,5,32,3],[38,6,32,4],[39,4,34,2],[39,11,34,9,"deferred"],[39,19,34,17],[40,2,35,0],[42,2,37,0],[43,0,38,0],[44,0,39,0],[45,0,40,0],[46,2,41,7],[46,11,41,16,"promiseWithOptionalCallback"],[46,38,41,43,"promiseWithOptionalCallback"],[46,39,41,44,"promise"],[46,46,41,51],[46,48,41,53,"callback"],[46,56,41,61],[46,58,41,63],[47,4,42,2],[47,8,42,6],[47,9,42,7],[47,13,42,7,"isFunction"],[47,22,42,17],[47,23,42,17,"isFunction"],[47,33,42,17],[47,35,42,18,"callback"],[47,43,42,26],[47,44,42,27],[47,46,42,29],[48,6,43,4],[48,13,43,11,"promise"],[48,20,43,18],[49,4,44,2],[50,4,46,2],[50,11,46,9,"promise"],[50,18,46,16],[50,19,47,5,"then"],[50,23,47,9],[50,24,47,10,"result"],[50,30,47,16],[50,34,47,20],[51,6,48,6],[51,10,48,10,"callback"],[51,18,48,18],[51,22,48,22,"callback"],[51,30,48,30],[51,31,48,31,"length"],[51,37,48,37],[51,42,48,42],[51,43,48,43],[51,45,48,45],[52,8,49,8,"callback"],[52,16,49,16],[52,17,49,17],[52,21,49,21],[52,22,49,22],[53,6,50,6],[53,7,50,7],[53,13,50,13],[53,17,50,17,"callback"],[53,25,50,25],[53,27,50,27],[54,8,51,8,"callback"],[54,16,51,16],[54,17,51,17],[54,21,51,21],[54,23,51,23,"result"],[54,29,51,29],[54,30,51,30],[55,6,52,6],[56,6,54,6],[56,13,54,13,"result"],[56,19,54,19],[57,4,55,4],[57,5,55,5],[57,6,55,6],[57,7,56,5,"catch"],[57,12,56,10],[57,13,56,11,"error"],[57,18,56,16],[57,22,56,20],[58,6,57,6],[58,10,57,10,"callback"],[58,18,57,18],[58,20,57,20],[59,8,58,8,"callback"],[59,16,58,16],[59,17,58,17,"error"],[59,22,58,22],[59,23,58,23],[60,6,59,6],[61,6,60,6],[61,13,60,13,"Promise"],[61,20,60,20],[61,21,60,21,"reject"],[61,27,60,27],[61,28,60,28,"error"],[61,33,60,33],[61,34,60,34],[62,4,61,4],[62,5,61,5],[62,6,61,6],[63,2,62,0],[64,0,62,1],[64,3]],"functionMap":{"names":["<global>","promiseDefer","Promise$argument_0","promiseWithOptionalCallback","then$argument_0","then._catch$argument_0"],"mappings":"AAA;OCsB;iCCM;GDG;CDG;OGM;UCM;KDQ;WEC;KFK;CHC"},"hasCjsExports":false},"type":"js/module"}]}