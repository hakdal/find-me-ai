{"dependencies":[{"name":"./NitroModules","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":20,"index":165},"end":{"line":7,"column":45,"index":190}}],"key":"8HKlsqu69eWUE3W5T93pnmDuxRU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getHybridObjectConstructor = getHybridObjectConstructor;\n  var _NitroModules = require(_dependencyMap[0], \"./NitroModules\");\n  const cache = new Map();\n\n  /**\n   * Get a constructor function for the given `HybridObject` {@linkcode T}.\n   * @param name The name of the `HybridObject` under which it was registered at.\n   * @returns A constructor that creates instances of {@linkcode T}\n   * @example\n   * ```ts\n   * export const HybridImage = getHybridObjectConstructor<Image>('Image')\n   *\n   * const image1 = new HybridImage()\n   * const image2 = new HybridImage()\n   * image1 instanceof HybridImage // --> true\n   * ```\n   */\n  function getHybridObjectConstructor(name) {\n    // Cache functions for performance.\n    if (cache.has(name)) {\n      return cache.get(name);\n    }\n\n    // A function that creates the HybridObject.\n    // This can be called with `new`, and internally sets the prototype.\n    const constructorFunc = function () {\n      const instance = _NitroModules.NitroModules.createHybridObject(name);\n      const prototype = Object.getPrototypeOf(instance);\n      if (constructorFunc.prototype !== prototype) {\n        constructorFunc.prototype = prototype;\n        constructorFunc.prototypeInitialized = true;\n      }\n      return instance;\n    };\n\n    // Configure lazy prototype. If `instanceof` is called before a `T`\n    // has been created, we just lazy-create a new `T` instance to set the proto.\n    constructorFunc.prototypeInitialized = false;\n    Object.defineProperty(constructorFunc, Symbol.hasInstance, {\n      value: instance => {\n        if (!constructorFunc.prototypeInitialized) {\n          // User didn't call `new T()` yet, so we don't\n          // know the prototype yet. Just create one temp object to find\n          // out the prototype.\n          const tempInstance = _NitroModules.NitroModules.createHybridObject(name);\n          constructorFunc.prototype = Object.getPrototypeOf(tempInstance);\n          constructorFunc.prototypeInitialized = true;\n        }\n        // Loop through the prototype chain of the value\n        // we're testing for to see if it is a direct instance\n        // of `T`, or a derivative of it.\n        let proto = Object.getPrototypeOf(instance);\n        while (proto != null) {\n          if (proto === constructorFunc.prototype) {\n            return true;\n          }\n          proto = Object.getPrototypeOf(proto);\n        }\n        // No prototype overlap.\n        return false;\n      }\n    });\n    cache.set(name, constructorFunc);\n    return constructorFunc;\n  }\n});","lineCount":72,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"getHybridObjectConstructor"],[7,36,6,34],[7,39,6,37,"getHybridObjectConstructor"],[7,65,6,63],[8,2,7,0],[8,6,7,4,"_NitroModules"],[8,19,7,17],[8,22,7,20,"require"],[8,29,7,27],[8,30,7,27,"_dependencyMap"],[8,44,7,27],[8,65,7,44],[8,66,7,45],[9,2,8,0],[9,8,8,6,"cache"],[9,13,8,11],[9,16,8,14],[9,20,8,18,"Map"],[9,23,8,21],[9,24,8,22],[9,25,8,23],[11,2,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,2,23,0],[24,11,23,9,"getHybridObjectConstructor"],[24,37,23,35,"getHybridObjectConstructor"],[24,38,23,36,"name"],[24,42,23,40],[24,44,23,42],[25,4,24,2],[26,4,25,2],[26,8,25,6,"cache"],[26,13,25,11],[26,14,25,12,"has"],[26,17,25,15],[26,18,25,16,"name"],[26,22,25,20],[26,23,25,21],[26,25,25,23],[27,6,26,4],[27,13,26,11,"cache"],[27,18,26,16],[27,19,26,17,"get"],[27,22,26,20],[27,23,26,21,"name"],[27,27,26,25],[27,28,26,26],[28,4,27,2],[30,4,29,2],[31,4,30,2],[32,4,31,2],[32,10,31,8,"constructorFunc"],[32,25,31,23],[32,28,31,26],[32,37,31,26,"constructorFunc"],[32,38,31,26],[32,40,31,38],[33,6,32,4],[33,12,32,10,"instance"],[33,20,32,18],[33,23,32,21,"_NitroModules"],[33,36,32,34],[33,37,32,35,"NitroModules"],[33,49,32,47],[33,50,32,48,"createHybridObject"],[33,68,32,66],[33,69,32,67,"name"],[33,73,32,71],[33,74,32,72],[34,6,33,4],[34,12,33,10,"prototype"],[34,21,33,19],[34,24,33,22,"Object"],[34,30,33,28],[34,31,33,29,"getPrototypeOf"],[34,45,33,43],[34,46,33,44,"instance"],[34,54,33,52],[34,55,33,53],[35,6,34,4],[35,10,34,8,"constructorFunc"],[35,25,34,23],[35,26,34,24,"prototype"],[35,35,34,33],[35,40,34,38,"prototype"],[35,49,34,47],[35,51,34,49],[36,8,35,6,"constructorFunc"],[36,23,35,21],[36,24,35,22,"prototype"],[36,33,35,31],[36,36,35,34,"prototype"],[36,45,35,43],[37,8,36,6,"constructorFunc"],[37,23,36,21],[37,24,36,22,"prototypeInitialized"],[37,44,36,42],[37,47,36,45],[37,51,36,49],[38,6,37,4],[39,6,38,4],[39,13,38,11,"instance"],[39,21,38,19],[40,4,39,2],[40,5,39,3],[42,4,41,2],[43,4,42,2],[44,4,43,2,"constructorFunc"],[44,19,43,17],[44,20,43,18,"prototypeInitialized"],[44,40,43,38],[44,43,43,41],[44,48,43,46],[45,4,44,2,"Object"],[45,10,44,8],[45,11,44,9,"defineProperty"],[45,25,44,23],[45,26,44,24,"constructorFunc"],[45,41,44,39],[45,43,44,41,"Symbol"],[45,49,44,47],[45,50,44,48,"hasInstance"],[45,61,44,59],[45,63,44,61],[46,6,45,4,"value"],[46,11,45,9],[46,13,45,11,"instance"],[46,21,45,19],[46,25,45,23],[47,8,46,6],[47,12,46,10],[47,13,46,11,"constructorFunc"],[47,28,46,26],[47,29,46,27,"prototypeInitialized"],[47,49,46,47],[47,51,46,49],[48,10,47,8],[49,10,48,8],[50,10,49,8],[51,10,50,8],[51,16,50,14,"tempInstance"],[51,28,50,26],[51,31,50,29,"_NitroModules"],[51,44,50,42],[51,45,50,43,"NitroModules"],[51,57,50,55],[51,58,50,56,"createHybridObject"],[51,76,50,74],[51,77,50,75,"name"],[51,81,50,79],[51,82,50,80],[52,10,51,8,"constructorFunc"],[52,25,51,23],[52,26,51,24,"prototype"],[52,35,51,33],[52,38,51,36,"Object"],[52,44,51,42],[52,45,51,43,"getPrototypeOf"],[52,59,51,57],[52,60,51,58,"tempInstance"],[52,72,51,70],[52,73,51,71],[53,10,52,8,"constructorFunc"],[53,25,52,23],[53,26,52,24,"prototypeInitialized"],[53,46,52,44],[53,49,52,47],[53,53,52,51],[54,8,53,6],[55,8,54,6],[56,8,55,6],[57,8,56,6],[58,8,57,6],[58,12,57,10,"proto"],[58,17,57,15],[58,20,57,18,"Object"],[58,26,57,24],[58,27,57,25,"getPrototypeOf"],[58,41,57,39],[58,42,57,40,"instance"],[58,50,57,48],[58,51,57,49],[59,8,58,6],[59,15,58,13,"proto"],[59,20,58,18],[59,24,58,22],[59,28,58,26],[59,30,58,28],[60,10,59,8],[60,14,59,12,"proto"],[60,19,59,17],[60,24,59,22,"constructorFunc"],[60,39,59,37],[60,40,59,38,"prototype"],[60,49,59,47],[60,51,59,49],[61,12,60,10],[61,19,60,17],[61,23,60,21],[62,10,61,8],[63,10,62,8,"proto"],[63,15,62,13],[63,18,62,16,"Object"],[63,24,62,22],[63,25,62,23,"getPrototypeOf"],[63,39,62,37],[63,40,62,38,"proto"],[63,45,62,43],[63,46,62,44],[64,8,63,6],[65,8,64,6],[66,8,65,6],[66,15,65,13],[66,20,65,18],[67,6,66,4],[68,4,67,2],[68,5,67,3],[68,6,67,4],[69,4,68,2,"cache"],[69,9,68,7],[69,10,68,8,"set"],[69,13,68,11],[69,14,68,12,"name"],[69,18,68,16],[69,20,68,18,"constructorFunc"],[69,35,68,33],[69,36,68,34],[70,4,69,2],[70,11,69,9,"constructorFunc"],[70,26,69,24],[71,2,70,0],[72,0,70,1],[72,3]],"functionMap":{"names":["<global>","getHybridObjectConstructor","constructorFunc","Object.defineProperty$argument_2.value"],"mappings":"AAA;ACsB;0BCQ;GDQ;WEM;KFqB;CDI"},"hasCjsExports":true},"type":"js/module"}]}